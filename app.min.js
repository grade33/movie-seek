(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e,i){var n,s=i.gap,o=void 0===s?0:s,r=i.slidePerView,a=void 0===r?1:r,l=i.slidePerGroup,c=void 0===l?1:l,d=i.speed,u=void 0===d?300:d,h=i.mainSelector,v=void 0===h?".slider":h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n="scrolledPosition")in this?Object.defineProperty(this,n,{value:0,enumerable:!0,configurable:!0,writable:!0}):this[n]=0,this.slider=e,this.mainSelector=v,this.slidePerView=a,this.slidePerGroup=c,this.gap=o,this.speed=u,this.activeSlide=0,this.initialStartMethods()}var i,n;return i=t,(n=[{key:"initialStartMethods",value:function(){this.initDOMElements(),this.setSlidesWidth(),this.setGap(),this.setSlidesSpeed(),this.setActiveSlide(),this.btnPrev.addEventListener("click",this.prevSlide.bind(this)),this.btnNext.addEventListener("click",this.nextSlide.bind(this))}},{key:"initDOMElements",value:function(){this.wrapper=this.slider.querySelector("".concat(this.mainSelector,"__wrapper")),this.slides=this.slider.querySelectorAll("".concat(this.mainSelector,"__slide")),this.btnPrev=this.slider.querySelector("".concat(this.mainSelector,"__btn_prev")),this.btnNext=this.slider.querySelector("".concat(this.mainSelector,"__btn_next"))}},{key:"setSlidesWidth",value:function(){var e=this;this.slides.forEach((function(t){t.style.width="calc(100 / ".concat(e.slidePerView," * 1% - ((").concat(e.gap," - ").concat(e.gap," / ").concat(e.slidePerView,") * 1px))")}))}},{key:"setGap",value:function(){this.wrapper.style.gap=this.gap+"px"}},{key:"prevSlide",value:function(){this.scrolledPosition-=this.getMovePoint(),this.scrolledPosition=this.scrolledPosition<0?0:this.scrolledPosition,this.wrapper.style.transform="translateX(-".concat(this.scrolledPosition,"px)"),this.setActiveSlide("prev")}},{key:"nextSlide",value:function(){var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth;this.scrolledPosition+=this.getMovePoint(),this.scrolledPosition=this.scrolledPosition>e?e:this.scrolledPosition,this.wrapper.style.transform="translateX(-".concat(this.scrolledPosition,"px)"),this.setActiveSlide("next")}},{key:"getMovePoint",value:function(){for(var e=0,t=0;t<this.slidePerGroup;t++)e+=+this.slides[0].offsetWidth+ +this.gap;return e}},{key:"setSlidesSpeed",value:function(){this.wrapper.style.transition="transform ".concat(this.speed,"ms ease-in-out")}},{key:"setActiveSlide",value:function(e){if("prev"===e)this.activeSlide-=this.slidePerGroup,this.activeSlide=this.activeSlide<0?0:this.activeSlide;else if("next"===e){if(this.slides[this.slides.length-this.slidePerView].classList.contains("slider__slide_active"))return!1;this.activeSlide+=this.slidePerGroup,this.activeSlide=this.activeSlide>this.slides.length-this.slidePerView?this.slides.length-this.slidePerView:this.activeSlide}this.slider.querySelectorAll(".slider__slide_active").forEach((function(e){return e.classList.remove("slider__slide_active")})),this.slides[this.activeSlide].classList.add("slider__slide_active")}}])&&e(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=n((function e(i,n){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sliders=[],document.querySelectorAll(i).forEach((function(e){s.sliders.push(new t(e,n))}))}));function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sectionElem=t,this.sectionName=this.sectionElem.dataset.sectionName,this.sections={sectionNew:{title:"Новинки"},sectionPopular:{title:"Популярное"},sectionWatchedNow:{title:"Сейчас смотрят"},sectionFilm:{title:"Фильмы"},sectionSerial:{title:"Сериалы"},sectionCartoon:{title:"Мультфильмы"},sectionGenresFilm:{title:"По жанрам"},sectionGenresSerial:{title:"По жанрам"},sectionGenresCartoon:{title:"По жанрам"}},this.setTexts()}var t,i;return t=e,(i=[{key:"setTexts",value:function(){this.sectionName.includes("Genre")||(this.sectionElem.querySelector('[data-pattern="title"]').textContent=this.sections[this.sectionName].title)}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d,u,h,v,f,p,y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"sectionClassic",null),c(this,"sectionGenre",null),this.nav=document.querySelector(".nav"),this.main=document.querySelector(".main"),this.activeLink=document.querySelector('.nav__link[data-nav="pageMain"]'),this.pageName=this.activeLink.dataset.nav,this.pages={pageMain:["sectionNew","sectionPopular","sectionWatchedNow","sectionFilm","sectionSerial","sectionCartoon"],pageFilm:["sectionGenreFilm","sectionNew","sectionPopular","sectionWatchedNow"],pageSerial:["sectionGenreSerial","sectionNew","sectionPopular","sectionWatchedNow"],pageCartoon:["sectionGenreCartoon","sectionNew","sectionPopular","sectionWatchedNow"]},this.saveAndClearSections(),this.initMethods(),this.monitoringNavLinkChange()}var t,i;return t=e,(i=[{key:"saveAndClearSections",value:function(){var e=document.querySelector('section[data-section="classic"]');e.remove();var t=document.querySelector('section[data-section="genre"]');t.remove(),this.sectionClassic=e,this.sectionGenre=t}},{key:"monitoringNavLinkChange",value:function(){var e=this;this.nav.addEventListener("click",(function(t){var i=t.target.closest(".nav__link");i&&i!==e.activeLink&&(e.setActiveLink(i),e.initMethods())}))}},{key:"initMethods",value:function(){this.setClassActiveLink(),this.setMainTitle(),this.renderPageSections()}},{key:"setActiveLink",value:function(e){this.activeLink=e,this.pageName=this.activeLink.dataset.nav}},{key:"setClassActiveLink",value:function(){this.nav.querySelectorAll(".nav__link_active").forEach((function(e){return e.classList.remove("nav__link_active")})),this.activeLink.classList.add("nav__link_active")}},{key:"setMainTitle",value:function(){document.querySelector(".main__title").innerHTML=this.activeLink.textContent.trim()}},{key:"renderPageSections",value:function(){this.main.querySelectorAll("[data-section]").forEach((function(e){e.remove()}));var e,t,i=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,s=function(){};return{s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(l)throw o}}}}(this.pages[this.pageName]);try{for(i.s();!(t=i.n()).done;){var n=t.value;(e=n.includes("Genre")?this.sectionGenre.cloneNode(!0):this.sectionClassic.cloneNode(!0)).dataset.sectionName=n,this.main.append(e),new r(e)}}catch(e){i.e(e)}finally{i.f()}}}])&&l(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();d=document.querySelector(".content"),u=document.querySelector(".header"),h=document.querySelector(".aside"),d.style.marginTop=u.offsetHeight+"px",h.style.top=u.offsetHeight+"px",document.querySelectorAll(".rating").forEach((function(e){+e.innerHTML>7?e.style.background="#007b00":+e.innerHTML<5&&(e.style.background="#ff0b0b")})),v=document.querySelector(".movie-genre__filter"),f=v.querySelector(".movie-genre__filter-btn"),(p=v.querySelector(".movie-genre__filter-list")).hiddem=!0,f.addEventListener("click",(function(){if(p.classList.contains("movie-collection__genre-list_active"))return p.classList.remove("movie-collection__genre-list_active"),void p.addEventListener("transitionend",(function e(){p.hidden=!0,p.style.top="",p.style.bottom="",p.removeEventListener("transitionend",e)}));p.hiddem=!1;var e=f.getBoundingClientRect();document.documentElement.clientHeight-e.bottom<=p.offsetHeight&&e.top>=p.offsetHeight?p.style.bottom="100%":p.style.top="100%",p.classList.add("movie-collection__genre-list_active")})),new s(".movie-collection__slider",{gap:"20",slidePerView:6,speed:500,slidePerGroup:4}),new y})();